{% extends "base.html" %}
{% block content %}

<div class="valign-wrapper" id="showcase">
    <div class="container" id="content">
        <div class="row">
            <div class="col s12">
                <div class="container">
                    <div class="card hoverable grey darken-3 button-border-purple">
                        <div class="card-content">
                            <div class="row">
                                <h3 class="white-text">
                                    Confirmation Email Sent
                                </h3>
                            </div>
                    
                            <div class="row">
                                <div class="col s12">
                                    <p class="white-text flow-text">
                                        Success! Your account has been created and a confirmation email has been sent to <i class="blue-text">{{
                                            email }}</i>. Please confirm your email address before using Snypit.
                                    </p>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col s12 center">
                                    <div class="section"></div>
                                    <i class="fas fa-envelope-open white-text fa-5x center animated pulse infinite"></i>
                                    <div class="section"></div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col s12 m12 l6">
                                    <form action="/resend-email-confirmation?email={{ email }}&token={{ token }}" method="POST">
                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                                        <button type="submit" class="full-width-button btn-flat purple darken-1 white-text center">Resend Confirmation
                                            Email</button>
                                    </form>
                                </div>

                                <div class="col s12 m12 l6 center">
                                    <a href="#updateEmailModal" class="modal-trigger full-width-button btn-flat purple darken-1 white-text">Update Email Address</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="updateEmailModal" class="modal grey darken-3 white-text">
    <div class="modal-content">
        <div class="row">
            <h3>
                Update Email Address<i class="fas fa-envelope-open white-text right"></i>
            </h3>
        </div>

        <form action="/reset-confirmation-email?old_email={{ email }}" method="POST">
            <div class="row">
                <div class="col s12">
                    <div class="col s12 m12 l12 input-field">
                        <i class="material-icons prefix white-text">email</i>
                        {{ reset_confirm_email_form.hidden_tag() }} {{ reset_confirm_email_form.email(class="validate
                        white-text", required="", type="email")}} {{ reset_confirm_email_form.email.label
                        }} {% for error in reset_confirm_email_form.email.errors %}
                        <span class="red-text accent-1">{{ error }}</span>
                        {% endfor %}
                    </div>

                    <div class="col s12 m12 l12 input-field">
                        <i class="material-icons prefix white-text">lock</i>
                        {{ reset_confirm_email_form.password(class="validate white-text", required="",
                        type="password", pattern=".{8,}", title="Must be at least 8 characters.")}} {{
                        reset_confirm_email_form.password.label
                        }} {% for
                        error in reset_confirm_email_form.password.errors %}
                        <span class="red-text accent-1">{{ error }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col s12">
                    <button class="waves-effect waves-purple transparent btn-flat right white-text" type="submit">Submit</button>
                    <a href="#!" class="modal-close waves-effect waves-purple btn-flat white-text right">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('.modal');
        var instances = M.Modal.init(elems, {});
    });
</script>

{% endblock %}